<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
    <meta name="author" content="GeeksLabs">
    <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
    <link rel="shortcut icon" href="img/favicon.png">

    <title>Creative - Bootstrap Admin Template</title>

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- bootstrap theme -->
    <link href="css/bootstrap-theme.css" rel="stylesheet">
    <!--external css-->
    <!-- font icon -->
    <link href="css/elegant-icons-style.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- full calendar css-->
    <link href="assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet" />
    <link href="assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" />
    <!-- easy pie chart-->
    <link href="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
    <!-- owl carousel -->
    <link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
    <link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet">
    <!-- Custom styles -->
    <link rel="stylesheet" href="css/fullcalendar.css">
    <link href="css/widgets.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet" />
    <link href="css/xcharts.min.css" rel=" stylesheet">
    <link href="css/jquery-ui-1.10.4.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <script src="js/lte-ie7.js"></script>
    <![endif]-->
      <script src="http://libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
</head>

<body>
<!-- container section start -->
<section id="container" class="">


    <header class="header dark-bg">
        <div class="toggle-nav">
            <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
        </div>

        <!--logo start-->
        <a href="general.html" class="logo"><span class="lite">课程服务与管理平台</span></a>
        <!--logo end-->

        <div class="top-nav notification-row">                
                <!-- notificatoin dropdown start-->
                <ul class="nav pull-right top-menu">
                    
                    
                    <!-- user login dropdown start-->
                    <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="profile-ava">
                                <img alt="" src="img/avatar1_small.jpg">
                            </span>
                            <span id="tUname">你的ID</span>
                            
                            <script type="text/javascript">
	                            console.log(document.cookie); 
	                            var arrCookie = document.cookie.split(";");
	                            var tUname = unescape(arrCookie[0]);
	                            document.getElementById("tUname").innerHTML = tUname;
                            </script>
                            
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu extende d logout">
                            <div class="log-arrow-up"></div>
                            <li class="eborder-top">
                                <a href="profile.html"><i class="icon_profile"></i>个人中心</a>
                            </li>
                            <li>
                                <a href="login.html"><i class="icon_key_alt"></i> 登出</a>
                            </li>
                        </ul>
                    </li>
                    <!-- user login dropdown end -->
                </ul>
                <!-- notificatoin dropdown end-->
            </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside>
        <div id="sidebar"  class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">

                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon_document_alt"></i>
                        <span>课程</span>
                        <span class="menu-arrow arrow_carrot-right"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="#">教学大纲</a>
                            <ul>
                                <li><a href="1.html">一、基本信息</a></li>
                                <li><a href="2.html">二、课程描述</a></li>
                                <li><a href="3.html">三、教学目标</a></li>
                                <li><a href="4.html">四、课程目标</a></li>
                                <li><a href="5.html">五、教学内容</a></li>
                                <li><a href="6.html">六、教学安排</a></li>
                                <li><a href="7.html">七、课内实验</a></li>
                                <li><a href="8.html">八、教学方法</a></li>
                                <li><a href="9.html">九、考核方式</a></li>
                                <li><a href="10.html">十、主要参考书</a></li>
                            </ul>
                        </li>
                      
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon_desktop"></i>
                        <span>课堂</span>
                        <span class="menu-arrow arrow_carrot-right"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="general.html">课表</a></li>
                        <li><a class="" href="qa.html">留言板</a></li>

                    </ul>
                </li>
              

                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon_documents_alt"></i>
                        <span>页面</span>
                        <span class="menu-arrow arrow_carrot-right"></span>
                    </a>
                    <ul class="sub">
                        <li><a class="" href="profile.html">个人中心</a></li>
                        <li><a class="" href="login.html"><span>登录页</span></a></li>
                        <li><a class="" href="blank.html">空白页</a></li>
                        <li><a class="" href="404.html">404 Error</a></li>
                    </ul>
                </li>

            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="page-header"><i class="fa fa-table"></i>课堂</h3>
                    <ol class="breadcrumb">

                        <li><i class="fa fa-table"></i>课表</li>
                        
                    </ol>
                </div>
            </div>

 		<table border="1">
                
             
              
             <input id="qaq"  type="text"> 
                <button id="" onclick="QaQuery()">根据学号查询</a></button> 
      			

        </table>



                <!--main content end-->
        </section>
        <!-- container section end -->

        <!-- javascripts -->
        
		<script>
		  	  $.ajax({
		  			url : 'http://47.100.162.180:8080/coursemgmt/quAnses',
		  			type : 'GET',
		  			async : false,
		  			contentType:"application/json",
		  			

		  			success : function(data) {
		  				console.log(data);
		  				var trStr="";
		  				trStr+='<table border="1" cellspacing="0">';
		  				trStr += '<tr>';
		  				trStr += '<td>' + '问答号' + '</td>';
		  				trStr += '<td>' + '学生编号' + '</td>';
		  				trStr += '<td>' + '问题内容' + '</td>';
		  				trStr += '<td>' + '老师编号' + '</td>';
		  				trStr += '<td>' + '回答内容' + '</td>';
		  				trStr += '<td>' + '解决情况' + '</td>';
		  				
		  				trStr += '<td colspan="2">' + '操作' + '</td>';
		  				trStr += '</tr>'; 
		  				for (var i = 0; i < data.length; i++) 
		  				{
		  					 trStr += '<tr>';
		  					 trStr += '<td>' + data[i].quAnsId + '</td>'; 
		  					 trStr += '<td>' + data[i].sId + '</td>';
		  					 trStr += '<td>' + data[i].question + '</td>';
		  					 trStr += '<td>' + data[i].tId + '</td>';
			  				 trStr += '<td>' + data[i].answer + '</td>';
			  		    	 trStr += '<td>' + data[i].solved + '</td>';
			  				
			  		
			  				 trStr += '<td><a href="answer.html?quAnsId='+data[i].quAnsId+'=sId='+data[i].sId+'=question='+data[i].question+'">回复</a></td>';
			  				 trStr += '<td><button onclick="deleteQa('+data[i].quAnsId+')">删除</td>';
		  					 trStr += '</tr>';
		  				}
		  				trStr+='</table>';
		  				document.write(trStr);	  				
		  			},    
		  		
		  		});
		  	  
		  	function QaQuery()
			{
				var qaq = $("#qaq").val();
				
				
				$.ajax({
			        url : 'http://47.100.162.180:8080/coursemgmt/quAnses',
			        type : 'GET',
			        async : false,
			        contentType:"application/json",
			        xhrFields:{withCredentials: true},

			        success : function(data) {
			          console.log(data);
			        for(i=0;i<data.length;i++)
			         {
			         	if(data[i].sId==qaq)
			         		break;
			         }
			         if(i==data.length)
			         	alert("未查询到该学生的问题！");

			 
			          else
		        	  {
		        	  		var trStr="";
			  				trStr+='<table border="1" cellspacing="0">';
			  				trStr += '<tr>';
			  				trStr += '<td>' + '问答号' + '</td>';
			  				trStr += '<td>' + '学生编号' + '</td>';
			  				trStr += '<td>' + '问题内容' + '</td>';
			  				trStr += '<td>' + '老师编号' + '</td>';
			  				trStr += '<td>' + '回答内容' + '</td>';
			  				trStr += '<td>' + '解决情况' + '</td>';
			  			
			  			
			  				trStr += '<td colspan="2">' + '操作' + '</td>';
			  				trStr += '</tr>'; 
			  				
		  					 trStr += '<tr>';
		  					 trStr += '<td>' + data[i].quAnsId + '</td>'; 
		  					 trStr += '<td>' + data[i].sId + '</td>';
		  					 trStr += '<td>' + data[i].question + '</td>';
		  					 trStr += '<td>' + data[i].tId + '</td>';
			  				 trStr += '<td>' + data[i].answer + '</td>';
			  		    	 trStr += '<td>' + data[i].solved + '</td>';
			  	
			  				
			  				 trStr += '<td><a href="answer.html?quAnsId='+data[i].quAnsId+'=sId='+data[i].sId+'=question='+data[i].question+'">回复</a></td>';
			  				 trStr += '<td><button onclick="deleteQa('+data[i].quAnsId+')">删除</td>';
		  					 trStr += '</tr>';
			  				
			  				trStr += '<tr>';
			  				trStr += '<td colspan="7" align="center">' + '<a href="qa.html">'+'<input type=button value="返回">'
							+'</a>' + '</td>';
			  				trStr += '</tr>';
			  				trStr+='</table>';
			  				document.write(trStr);
		        	  }
		          	 
				  				
			        },
			        error : function(returndata) {
			        	
			        }
			      });
			}
		  	
		  	function deleteQa(quAnsId)
		  	{
		  		
				
				$.ajax({
			        url : 'http://47.100.162.180:8080/coursemgmt/quAnses/'+quAnsId,
			        type : 'DELETE',
			        async : false,
			        contentType:"application/json",
			        xhrFields:{withCredentials: true},

			        success : function(data) {
			          console.log(data);
			          alert("删除成功");
				  	  window.location.href = "qa.html";
			        },
			        error : function(returndata) {
			        	
			        }
			      });
		  	}
		  	
			function QaUpdate(qaid)
			{
		  	  
		  	    var answer = $("#answer").val();
		  	 
		  	    
				$.ajax({
			        url : 'qaAction!updateQaById',
			        type : 'POST',
			        async : false,
			        contentType:"application/json",
			        data : JSON.stringify({
			        
				      qaid : qaid,
				        tid:tid,
				      	answer : answer
				     
			      	
			        }),
			        success : function(data) {
			          console.log(data);
			          alert("修改成功");
			          
			        },
			        error : function(returndata) {

			        }
			      });
			}
		    
		</script>
      

      
        <script src="js/bootstrap.min.js"></script>
        <!-- nice scroll -->
        <script src="js/jquery.scrollTo.min.js"></script>
        <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
        <!-- gritter -->

        <!-- custom gritter script for this page only-->
        <script src="js/gritter.js" type="text/javascript"></script>
        <!--custome script for all page-->
        <script src="js/scripts.js"></script>




</body>
</html>
